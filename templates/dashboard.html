{% extends 'base.html' %}

{% block content %}

{% for message in get_flashed_messages() %}
    <div class="alert alert-success alert-dismissible fade show" role="alert">
        {{ message}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    
{% endfor %}

<h1>Dashboard!</h1><br><br>

<!-- <p><strong>username:</strong>  {{ current_user.username }}</p> <br>
<p>password:  {{ current_user.password }}</p> <br>
<p>date_created:  {{ current_user.date_created }}</p> <br> -->

<div class="card">
    
    <div class="card-body">
        
        <h6 class="card-subtitle mb-2 text-body-secondary">Username</h6>
        <input id="u" class="card-title" value="{{ current_user.username }}"></input>
        <br>
        <h6 class="card-subtitle mb-2 text-body-secondary">Password</h6>
        <input id="p" class="card-title" value="{{ current_user.password }}" readonly>
        <button class="copy-btn"><span class="material-icons">
            content_copy
            </span></button>
        <br>
    </div>
</div>

<script>
    document.querySelectorAll(".card-body").forEach((copyLinkParent) => {
        const inputField = copyLinkParent.querySelector("#p");
        const copyButton = copyLinkParent.querySelector(".copy-btn");
        
        copyButton.addEventListener("click", () => {
            inputField.select();
            const text = inputField.value;
            navigator.clipboard.writeText(text);

            inputField.value = "Copied!";
            setTimeout(() => (inputField.value = text), 2000);
        });
    });

</script>

{% endblock %}